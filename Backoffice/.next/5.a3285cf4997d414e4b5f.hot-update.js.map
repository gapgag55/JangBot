{"version":3,"file":"5.a3285cf4997d414e4b5f.hot-update.js","sources":["webpack:///pages/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Layout, Form, notification } from 'antd';\nimport moment from 'moment';\nimport Wrapper from '../components/Wrapper';\nimport HomeworkForm from '../containers/HomeworkForm';\nimport TableItems from '../containers/TableItems';\nimport request from '../utilities/request';\nimport api from '../config/api';\n\nconst { Content } = Layout;\n\nclass Home extends Component {\n  state = {\n    isLoading: true,\n    isUpdate: false,\n    data: []\n  };\n\n  componentDidMount() {\n    this.getHomework();\n  }\n\n  addHomework = () => {\n    const { form } = this.props;\n    const self = this;\n\n    form.validateFieldsAndScroll(async (err, values) => {\n      form.resetFields();\n      if (!err) {\n        const { statusCode } = await request.post(api.url.homework, values);\n        const message = statusCode == 200 ? 'Send Message: Success' : 'Send Message: Fail';\n\n        notification.open({\n          message: message\n        });\n\n        self.getHomework();\n      }\n    });\n  }\n\n  updateHomework = () => {\n    const { form } = this.props;\n    const self = this;\n\n    form.validateFieldsAndScroll(async (err, values) => {\n      form.resetFields();\n\n      self.setState({\n        isUpdate: false\n      });\n\n      if (!err) {\n        const { statusCode } = await request.update(api.url.homework, values.id, values);\n        const message = statusCode == 200 ? 'Send Message: Success' : 'Send Message: Fail';\n\n        notification.open({\n          message: message\n        });\n      }\n    });\n  }\n\n  getHomework = async () => {\n    this.setState({ isLoading: true });\n\n    const { statusCode, data } = await request.get(api.url.homework)\n    if (statusCode) {\n      const convertedData = data.map((item, key) => ({\n        key,\n        id: item._id,\n        ...item\n      }));\n\n      this.setState({\n        isLoading: false,\n        data: convertedData.reverse()\n      });\n    }\n  }\n\n  onEdit = async (data) => {\n    const { form } = this.props;\n\n    form.setFieldsValue({\n      id: data._id,\n      subject: data.subject,\n      description: data.description,\n      type: data.type,\n      date: moment(moment(data.date).format('LL'), 'YYYY/MM/DD'),\n      time: moment(moment(data.time).format('LT'), 'h:mm:ss'),\n      appointment: data.appointment\n    });\n\n    this.setState({\n      isUpdate: true,\n    });\n  }\n\n  deleteHomework = async (id) => {\n    const { statusCode } = await request.remove(api.url.homework, id);\n    const message = statusCode == 200 ? 'Send Message: Success' : 'Send Message: Fail';\n\n    notification.open({\n      message: message\n    });\n\n    this.getHomework();\n  }\n\n  render() {\n    const { form } = this.props;\n    const { data, isLoading, isUpdate } = this.state;\n\n    return (\n      <Wrapper>\n        <Content style={{ margin: '24px 16px', padding: 24, background: '#fff', minHeight: 280 }}>\n          <Layout style={{ background: '#fff' }}>\n            <HomeworkForm\n              form={form}\n              onSubmit={this.addHomework}\n              onUpdate={this.updateHomework}\n              isUpdate={isUpdate}\n            />\n            <TableItems\n              isLoading={isLoading}\n              data={data}\n              onEdit={this.onEdit}\n              onDelete={this.deleteHomework}\n            />\n          </Layout>\n        </Content>\n      </Wrapper>\n    );\n  }\n}\n\nexport default Form.create()(Home);\n\n\n// WEBPACK FOOTER //\n// pages/index.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAHA;;;;;AAUA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAaA;;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AADA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAQA;AACA;AACA;AACA;AACA;AADA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAgBA;;;;;;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AAKA;AACA;AACA;AAFA;AAIA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;AACA;AADA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;AAiBA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AAlFA;AACA;AACA;;;AA0FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAUA;;;;AA3HA;AACA;AA6HA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}